<div *ngIf="loading" class="loading-state">Loading news...</div>
<div *ngIf="error" class="error-state">{{ error }}</div>

<section class="main-news-grid" *ngIf="!loading && lastNews.length">
  <div class="featured-article" 
       [style.background-image]="'url(' + (lastNews[0]?.image || 'https://via.placeholder.com/1000x600') + ')'"
       (click)="goToNews(lastNews[0]?.slug)">
    <div class="overlay">
      <span class="category-tag">
        {{ 
          lastNews[0]?.category === 'ERROR_GENERATING_OUTPUT' 
          ? 'General' 
          : (lastNews[0]?.category || 'General') 
        }}
      </span>
      <h2>{{ lastNews[0]?.title }}</h2>
      <p class="description">{{ lastNews[0]?.content | slice:0:150 }}...</p>
      
      <div class="date-info">
        <span>{{ lastNews[0]?.created_at | date: 'mediumDate' }}</span>
      </div>
      
    </div>
  </div>

  <div class="side-news-list">
    <article class="side-news-item" *ngFor="let news of lastNews.slice(1, 5)" (click)="goToNews(news.slug)">
      <img [src]="news.image || 'https://via.placeholder.com/100x70'" alt="{{ news.title }}">
      <div>
        <h3>{{ news.title }}</h3>
        <span class="timestamp">{{ news.created_at | date: 'shortTime' }}</span>
      </div>
    </article>
  </div>
</section>

<hr class="section-separator">

<section class="additional-news-section" *ngIf="!loading && popularNews.length">
  <h2>More Featured News</h2>
  <div class="additional-news-grid">
    <article class="news-list-item" *ngFor="let news of popularNews" (click)="goToNews(news.slug)">
      <img [src]="news.image || 'https://via.placeholder.com/200x120'" alt="{{ news.title }}">
      <div>
        <h4>{{ news.title }}</h4>
        <p>{{ news.description | slice:0:100 }}...</p>
      </div>
    </article>
  </div>
</section>